<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cn.mapper.SysUserMapper">

    <resultMap id="BaseResultMap" type="com.cn.mybatis.SysUser">
            <id property="id" column="id" jdbcType="BIGINT"/>
            <result property="userName" column="user_name" jdbcType="VARCHAR"/>
            <result property="userPassword" column="user_password" jdbcType="VARCHAR"/>
            <result property="userEmail" column="user_email" jdbcType="VARCHAR"/>
            <result property="userInfo" column="user_info" jdbcType="VARCHAR"/>
            <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
    </resultMap>

    <sql id="Base_Column_List">
        id,user_name,user_password,
        user_email,user_info,create_time,
        head_img
    </sql>
    <select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select * from sys_user where id = #{id}
    </select>
    <select id="selectAll" resultType="com.cn.mybatis.SysUser">
        select id,
                user_name userName,
                user_password userPassword,
                user_email userEmail,
                user_info userInfo ,
                head_img headImg,
                create_time createTime from sys_user
    </select>

    <select id="selectUserAndRoleById" resultType="com.cn.mybatis.SysUser" >
        select
            u.id,
            u.user_name userName,
            u.user_password userPassword,
            u.user_email userEmail ,
            u.user_info userinfo ,
            u.head_img headimg,
            u.create_time createTime ,
            r.id "role.id",
            r.role_name "role.roleName" ,
            r.enabled "role.enabled",
            r.create_by "role.createBy",
            r.create_time "role.createTime"
        from sys_user u
                 inner join sys_user_role ur on u.id = ur.user_id
                 inner join sys_role r on ur.role_id= r.id
        where u.id = #{id}

    </select>
    
    

</mapper>
